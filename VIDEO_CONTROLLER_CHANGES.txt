<?php
// VideoController.php - Sadece değişen kısımlar
// Tam dosya yerine sadece güncellenecek metodları gösteriyorum

// CREATE METODUNDA - Logo kullanımı
public function create() {
    // ... mevcut kod ...
    
    if ($featuredSource === 'text' || !$thumbnailPath) {
        $generator = new ImageGenerator();
        $featuredImageName = uniqid() . '_' . time() . '.jpg';
        $featuredImagePath = __DIR__ . '/../../public/uploads/featured/' . $featuredImageName;
        
        if (!is_dir(dirname($featuredImagePath))) {
            mkdir(dirname($featuredImagePath), 0755, true);
        }
        
        // ← LOGO EKLEME - YENİ!
        $generatedPath = $generator->generateFeaturedImage(
            $featuredText,
            $category['background_color'],
            $category['text_color'],
            $featuredImagePath,
            $category['logo_path'] ?? null  // ← Logo path gönder
        );
        
        // ... devamı ...
    }
}

// EDIT METODUNDA - Logo kullanımı
public function edit($id) {
    // ... mevcut kod ...
    
    if ($regenerateFeatured) {
        $category = $this->categoryModel->find($_POST['category_id']);
        $generator = new ImageGenerator();
        $featuredImageName = uniqid() . '_' . time() . '.jpg';
        $featuredImagePath = __DIR__ . '/../../public/uploads/featured/' . $featuredImageName;
        
        // ← LOGO EKLEME - YENİ!
        $generatedPath = $generator->generateFeaturedImage(
            $_POST['featured_text'] ?: $video['title'],
            $category['background_color'],
            $category['text_color'],
            $featuredImagePath,
            $category['logo_path'] ?? null  // ← Logo path gönder
        );
        
        $data['featured_image_path'] = $generatedPath;
    }
    
    // ... devamı ...
}
